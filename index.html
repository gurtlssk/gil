<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fake YS JRPG - Tilemap + Animation</title>
  <style>
    body {
      background-color: #111;
      color: #0f0;
      font-family: monospace;
      padding: 20px;
      text-align: center;
      user-select: none;
    }

    #game-box {
      width: 320px;
      height: 240px;
      margin: 20px auto;
      background-color: #222;
      position: relative;
      border: 4px solid #0f0;
      image-rendering: pixelated;
      overflow: hidden;
      box-sizing: content-box;
    }

    /* ÌÉÄÏùº */
    .tile {
      width: 16px;
      height: 16px;
      position: absolute;
      box-sizing: border-box;
    }
    .tile.ground {
      background-color: #2a7f2a;
    }
    .tile.tree {
      background-color: #4b2e05;
      border: 1px solid #362603;
    }

    /* ÌîåÎ†àÏù¥Ïñ¥ */
    #player {
      width: 16px;
      height: 16px;
      position: absolute;
      border: 1px solid #070;
      box-sizing: border-box;
      transition: background-color 0.15s;
    }

  </style>
</head>
<body>
  <h1>üî• Fake YS JRPG</h1>
  <div id="game-box"></div>
  <div id="info">Use arrow keys to move the hero. Can't walk through trees.</div>

<script>
  const gameBox = document.getElementById('game-box');

  const TILE_SIZE = 16;
  const MAP_WIDTH = 20;
  const MAP_HEIGHT = 15;

  // 0: ground, 1: tree (Ï∂©Îèå ÏûàÏùå)
  const mapData = [
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
    [0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0],
    [0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
    [0,0,0,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
    [0,1,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
  ];

  // Îßµ Î†åÎçîÎßÅ
  function drawMap() {
    for (let y = 0; y < MAP_HEIGHT; y++) {
      for (let x = 0; x < MAP_WIDTH; x++) {
        const tile = document.createElement('div');
        tile.classList.add('tile');
        tile.style.top = y * TILE_SIZE + 'px';
        tile.style.left = x * TILE_SIZE + 'px';

        if(mapData[y][x] === 0) {
          tile.classList.add('ground');
        } else if(mapData[y][x] === 1) {
          tile.classList.add('tree');
        }

        gameBox.appendChild(tile);
      }
    }
  }

  // ÌîåÎ†àÏù¥Ïñ¥ Ï¥àÍ∏∞ ÏúÑÏπò (ÌÉÄÏùº Í∏∞Ï§Ä)
  let playerPos = { x: 10, y: 7 };
  const player = document.createElement('div');
  player.id = 'player';
  gameBox.appendChild(player);

  // Ïï†ÎãàÎ©îÏù¥ÏÖò ÌîÑÎ†àÏûÑ
  let animationFrame = 0;

  // ÌîåÎ†àÏù¥Ïñ¥ ÏÉâÍπî ÌîÑÎ†àÏûÑ (Îã®Ïàú Í±∑Í∏∞ Ïï†ÎãàÎ©îÏù¥ÏÖò)
  function updatePlayerAnimation() {
    if(animationFrame % 2 === 0) {
      player.style.backgroundColor = '#0f0'; // Ï¥àÎ°ù
    } else {
      player.style.backgroundColor = '#0b0'; // ÏßôÏùÄ Ï¥àÎ°ù
    }
  }

  // ÌîåÎ†àÏù¥Ïñ¥ ÏúÑÏπò ÏóÖÎç∞Ïù¥Ìä∏
  function updatePlayerPosition() {
    player.style.left = playerPos.x * TILE_SIZE + 'px';
    player.style.top = playerPos.y * TILE_SIZE + 'px';
  }

  updatePlayerPosition();
  updatePlayerAnimation();

  // Ï∂©Îèå Ï≤¥ÌÅ¨ Ìï®Ïàò
  function isBlocked(x, y) {
    if(x < 0 || x >= MAP_WIDTH || y < 0 || y >= MAP_HEIGHT) return true;
    return mapData[y][x] === 1; // ÎÇòÎ¨¥ ÌÉÄÏùºÏùÄ ÎßâÌûò
  }

  // Ïù¥Îèô Ìï®Ïàò
  function movePlayer(dx, dy) {
    const newX = playerPos.x + dx;
    const newY = playerPos.y + dy;
    if (!isBlocked(newX, newY)) {
      playerPos.x = newX;
      playerPos.y = newY;
      animationFrame++;
      updatePlayerPosition();
      updatePlayerAnimation();
    }
  }

  // ÌÇ§Î≥¥Îìú ÏûÖÎ†• Ï≤òÎ¶¨
  window.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowUp':
        movePlayer(0, -1);
        break;
      case 'ArrowDown':
        movePlayer(0, 1);
        break;
      case 'ArrowLeft':
        movePlayer(-1, 0);
        break;
      case 'ArrowRight':
        movePlayer(1, 0);
        break;
    }
  });

  drawMap();
</script>
</body>
</html>
